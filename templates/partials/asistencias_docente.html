{% if asistencias %}
<table class="table table-hover table-borderless align-middle small mb-0">
  <thead class="table-light">
    <tr>
      <th style="min-width:110px;">Fecha</th>
      <th style="min-width:80px;">Hora</th>
      <th style="min-width:140px;">Estado</th>
    </tr>
  </thead>
  <tbody>
    {% for a in asistencias %}
    <tr>
      <td>
        <span class="badge bg-light text-dark shadow-sm px-3 py-2">
          {{ a['fecha'][:10] }}
        </span>
      </td>

      <td>
        {% if a['hora_registro'] %}
          <span class="badge bg-info bg-opacity-25 text-dark px-2 py-2">
            {{ a['hora_registro'] }}
          </span>
        {% else %}
          <span class="text-muted">—</span>
        {% endif %}
      </td>

      {# ---------- Estado / Justificación ---------- #}
      <td>
        {% if a['estado_justificacion'] == 'Aprobada' %}
          <span class="badge bg-success px-2 py-2">
            <i class="bi bi-check-circle-fill me-1"></i>Justificada
          </span>

        {% elif a['estado_justificacion'] == 'Pendiente' %}
          <span class="badge bg-warning text-dark px-2 py-2">
            <i class="bi bi-hourglass-split me-1"></i>Pendiente
          </span>

        {% else %}
          {% if a['estado'] == 'A tiempo' %}
            <span class="badge bg-success bg-opacity-75 px-2 py-2">
              <i class="bi bi-check2-circle me-1"></i>A tiempo
            </span>
          {% elif a['estado'] == 'Tarde' %}
            <span class="badge bg-warning text-dark bg-opacity-75 px-2 py-2">
              <i class="bi bi-clock-history me-1"></i>Tarde
            </span>
          {% elif a['estado'] == 'Inasistencia' %}
            <span class="badge bg-danger bg-opacity-75 px-2 py-2">
              <i class="bi bi-x-circle me-1"></i>Inasistencia
            </span>
          {% else %}
            <span class="badge bg-secondary bg-opacity-50 px-2 py-2">
              <i class="bi bi-dash-circle me-1"></i>{{ a['estado'] or '—' }}
            </span>
          {% endif %}
        {% endif %}
      </td>
    </tr>
    {% endfor %}
  </tbody>
</table>
{% else %}
<div class="text-center text-muted py-4">
  <i class="bi bi-emoji-frown fs-2 mb-2"></i>
  <div class="fw-semibold mt-2">
    Este docente no tiene asistencias registradas recientemente.
  </div>
  <div class="small">
    Apenas registre una asistencia, aparecerá aquí.
  </div>
</div>
{% endif %}
